# ğŸ” EvidenceChain â€” Secure Digital Evidence Management Using Blockchain

A production-grade blockchain + cybersecurity project that stores cryptographic hashes of digital evidence immutably on Ethereum (Ganache), with a full-featured React frontend and Node.js API backend.

---

## ğŸ“ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      React Frontend                          â”‚
â”‚   Upload Â· Verify Â· Evidence List Â· Detail Â· Dashboard      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ HTTP (REST API)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Node.js + Express                          â”‚
â”‚   /api/evidence/upload Â· verify Â· all Â· :id Â· :id/seal     â”‚
â”‚   Helmet Â· CORS Â· Rate Limiting Â· Morgan logging            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                          â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  File Storage  â”‚        â”‚  Ganache / ETH   â”‚
    â”‚  ./uploads/    â”‚        â”‚  Smart Contract  â”‚
    â”‚  (or IPFS)     â”‚        â”‚  EvidenceChain   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›¡ï¸ Cybersecurity Features

| Feature | Implementation |
|---|---|
| **Integrity** | SHA-256 hash stored on-chain â€” any file change = hash mismatch |
| **Tamper Detection** | Re-hash on verify, compare against blockchain record |
| **Non-repudiation** | Wallet address + timestamp in immutable audit trail |
| **Authentication** | Ethereum wallet address (MetaMask-ready) |
| **Confidentiality** | Optional IPFS + encryption (extensible) |
| **Immutability** | Seal function â€” sealed evidence cannot be altered |
| **Rate Limiting** | Express rate-limit on all API routes |
| **Input Hardening** | Helmet.js headers + CORS restrictions |

---

## ğŸ“ Project Structure

```
evidence-chain/
â”œâ”€â”€ contracts/
â”‚   â””â”€â”€ EvidenceChain.sol          â† Solidity smart contract
â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ 1_deploy_evidence.js       â† Truffle deployment
â”œâ”€â”€ build/                         â† Auto-generated by truffle migrate
â”‚   â””â”€â”€ contracts/
â”‚       â””â”€â”€ EvidenceChain.json
â”œâ”€â”€ truffle-config.js
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ server.js                  â† Express entry point
â”‚   â”œâ”€â”€ .env.example               â† Copy to .env and fill in
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ evidence.js            â† All API endpoints
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ blockchain.js          â† Web3 / contract interactions
â”‚   â”‚   â””â”€â”€ fileHash.js            â† SHA-256 hashing utility
â”‚   â””â”€â”€ uploads/                   â† Uploaded files (auto-created)
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ index.html
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ index.js
â”‚       â”œâ”€â”€ App.jsx                â† Routing + layout + sidebar
â”‚       â”œâ”€â”€ App.css                â† Full theme (dark forensic)
â”‚       â”œâ”€â”€ pages/
â”‚       â”‚   â”œâ”€â”€ Dashboard.jsx      â† Stats + quick actions + recent
â”‚       â”‚   â”œâ”€â”€ Upload.jsx         â† File upload + registration
â”‚       â”‚   â”œâ”€â”€ Verify.jsx         â† Integrity verification
â”‚       â”‚   â”œâ”€â”€ EvidenceList.jsx   â† Searchable evidence table
â”‚       â”‚   â””â”€â”€ EvidenceDetail.jsx â† Full record + audit trail
â”‚       â””â”€â”€ utils/
â”‚           â””â”€â”€ api.js             â† Axios API client
â””â”€â”€ README.md
```

---

## âš™ï¸ Prerequisites

Install these before starting:

| Tool | Version | Download |
|---|---|---|
| Node.js | â‰¥ 18.x | https://nodejs.org |
| Ganache GUI | Latest | https://trufflesuite.com/ganache |
| Truffle | â‰¥ 5.x | `npm install -g truffle` |
| Git | Any | https://git-scm.com |

---

## ğŸš€ Step-by-Step Setup & Run Instructions

### STEP 1 â€” Start Ganache

1. Open **Ganache GUI**
2. Click **"New Workspace"** â†’ Quickstart Ethereum
3. Note the **RPC Server** URL (default: `http://127.0.0.1:7545`)
4. Note any account's **private key** (click the ğŸ”‘ key icon next to an account)
5. Keep Ganache running throughout development

---

### STEP 2 â€” Clone / Set Up Project

```bash
# Navigate to project root
cd evidence-chain

# Install Truffle globally (if not already)
npm install -g truffle

# Install root dev dependencies
npm install
```

---

### STEP 3 â€” Deploy the Smart Contract

```bash
# From the project root
truffle migrate --reset
```

Expected output:
```
Deploying 'EvidenceChain'
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   > contract address:    0xAbC123...   â† COPY THIS
   > transaction hash:    0xdef456...
   > gas used:            1,234,567
```

ğŸ“Œ **Copy the contract address** â€” you need it in the next step.

---

### STEP 4 â€” Configure the Backend

```bash
cd backend

# Install dependencies
npm install

# Copy environment template
cp .env.example .env
```

Edit `.env` and fill in your values:

```env
PORT=5000
NODE_ENV=development

BLOCKCHAIN_RPC_URL=http://127.0.0.1:7545

# Paste the contract address from truffle migrate output
CONTRACT_ADDRESS=0xYourDeployedContractAddress

# Paste a Ganache account private key (from the ğŸ”‘ icon)
DEPLOYER_PRIVATE_KEY=0xYourPrivateKeyHere

MAX_FILE_SIZE_MB=50
UPLOAD_DIR=./uploads
FRONTEND_URL=http://localhost:3000
```

---

### STEP 5 â€” Start the Backend Server

```bash
# From the backend/ directory
npm run dev
```

Expected output:
```
âœ… Blockchain connected: http://127.0.0.1:7545
âœ… Contract: 0xYourContractAddress
âœ… Deployer: 0xYourWalletAddress

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     EvidenceChain API Server         â•‘
â•‘     Running on port 5000             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

Test the API:
```bash
curl http://localhost:5000/api/health
# â†’ {"status":"OK","service":"EvidenceChain API"}
```

---

### STEP 6 â€” Start the Frontend

Open a **new terminal**:

```bash
cd frontend

# Install dependencies
npm install

# Start development server
npm start
```

The app opens at **http://localhost:3000** ğŸ‰

---

## ğŸ–¥ï¸ How to Use the Application

### Upload Evidence
1. Go to **Upload** page
2. Drag & drop or click to select a file (PDF, image, video, etc.)
3. Fill in: **Case ID** (required), Description, Uploader address (optional)
4. Click **"Register on Blockchain"**
5. Copy the **Evidence ID** and **SHA-256 hash** from the success result

### Verify Evidence
1. Go to **Verify** page
2. Drop the same file
3. Click **"Verify Integrity"**
4. âœ… = hash matches blockchain (untampered)
5. âŒ = hash mismatch (file was modified or not registered)

### Browse Evidence
1. Go to **Evidence** page
2. Search by file name, Case ID, or hash
3. Filter by status (Active, Sealed, Disputed, etc.)
4. Click any row to view full detail + audit trail

### Seal Evidence
1. Open any evidence detail page
2. Click **"Seal Evidence"**
3. Sealed evidence cannot have its status changed (immutable record)

---

## ğŸ”Œ API Reference

| Method | Endpoint | Description |
|---|---|---|
| POST | `/api/evidence/upload` | Upload file + register hash on-chain |
| POST | `/api/evidence/verify` | Verify file integrity |
| GET | `/api/evidence/all` | Get all evidence records |
| GET | `/api/evidence/:id` | Get single evidence + audit logs |
| POST | `/api/evidence/:id/seal` | Seal evidence |
| GET | `/api/evidence/stats/overview` | Dashboard statistics |
| GET | `/api/health` | Server health check |

---

## ğŸ§ª Testing the Smart Contract

```bash
# From project root
truffle console

# In the console:
const ec = await EvidenceChain.deployed()
await ec.getEvidenceCount()
await ec.addEvidence("abc123hash", "", "test.pdf", "application/pdf", 1024, "Test", "CASE-001")
```

---

## ğŸŒ Optional: IPFS Integration (Pinata)

1. Create account at https://pinata.cloud
2. Get API Key + Secret
3. Add to `.env`:
   ```
   PINATA_API_KEY=your_key
   PINATA_SECRET_KEY=your_secret
   ```
4. Modify `backend/routes/evidence.js` to call Pinata before `addEvidence()`

---

## ğŸ”§ Troubleshooting

| Problem | Fix |
|---|---|
| `CONTRACT_ADDRESS not set` | Run `truffle migrate --reset` and paste address into `.env` |
| `Cannot connect to RPC` | Make sure Ganache is running and port matches `.env` |
| `CORS error in browser` | Check `FRONTEND_URL` in `.env` matches `http://localhost:3000` |
| `Gas estimation failed` | Ensure your private key account has ETH in Ganache |
| Port 5000 in use | Change `PORT=5001` in `.env` and update `frontend/package.json` proxy |
| `Cannot find module web3` | Run `cd backend && npm install` |

---

## ğŸ“Š Security Report Points

Use these in your project report:

**Integrity** â€” SHA-256 produces a unique fingerprint of each file. The hash is stored immutably in the smart contract. Any modification to the evidence file changes its hash, immediately detectable.

**Non-repudiation** â€” Every action (upload, seal, status change) is logged on-chain with the actor's Ethereum wallet address and block timestamp. This cannot be forged or deleted.

**Tamper Detection** â€” Verification re-computes the file hash and queries the blockchain. A mismatch proves the file was altered after registration.

**Authentication** â€” Uploader identity is tied to an Ethereum wallet address. Operations requiring authorization (seal, status change) check `msg.sender`.

**Confidentiality** â€” Files can be encrypted before upload. IPFS integration adds content-addressed distributed storage. Smart contract stores only hashes, not file content.

**Auditability** â€” `AuditLog[]` array in the contract stores a tamper-proof history of every action taken on each piece of evidence.

---

## ğŸ“œ License

MIT â€” for educational purposes.
